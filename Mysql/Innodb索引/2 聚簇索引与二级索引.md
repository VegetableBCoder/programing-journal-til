# 聚簇索引与二级索引

## 聚簇索引

* innodb中数据本身就是按照树的方式进行存放的, 叶子节点就是数据行, 即聚簇索引
* 一般选择用户建表时的主键作为聚簇索引, 没有主键时选择不允许为null的唯一索引作为聚簇索引, 没有符合条件的索引时自动添加隐藏的主键列

## 二级索引

* 除主键外, 我们可能还需要以其他列作为条件进行数据检索, 此时再按这些列建立聚簇索引会造成数据冗余, 引发空间损耗和维护困难问题
* 此时将二级索引的叶子节点改为主键值, 就可以定位到需要查询的行的主键, 再通过聚簇索引查到数据行
* 从二级索引获取到主键后, 再从聚簇索引查询数据行的行为称为回表

## MyISAM

* MyISAM引擎的索引文件(.MYI)和数据文件(.MYD)是分开的, 所以主键也是二级索引
* 主键存放的信息是行在文件中的偏移量