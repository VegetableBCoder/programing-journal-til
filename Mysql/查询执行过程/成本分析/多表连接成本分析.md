# 多表连接的成本分析

## 连接方式分析

* n个表连接时, 有n的排列数种连接方式, 即n!种
* 成本比较时需要比较这些连接方式的成本
  * 假如已经算出了一部分连接方式的最低成本, 后续的成本方式在计算过程中发现部分表的连接成本高于这个值, 立即舍弃这种连接方式
  * 配置项: optimizer_search_depth, 如果连接的表数量少于这个值, 会尽可能遍历所有连接方式计算成本, 连接的表数大于这个值时, 会采用启发式搜索, 只尝试计算部分连接方式的成本
    * mysql8之后内部动态计算能力提升很大, 这个值可以配置为0(自动模式)

## 对实践的指导意义

* 尽量不要多表连接

