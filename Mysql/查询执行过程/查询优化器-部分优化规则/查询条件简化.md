# 查询条件简化

## 移除多余括号

* 如```select * from t where (a=1) and (b=2)```, 改写为```select * from t where a=1 and b=2```

### 常量化简

* 如```where a=5 and b> a``` 化简为 ```where a=5 and b > 5```
  
### 表达式计算
* 如```where a= 3+4``` 化简为```where a=7```
  
### 移除不成立或恒成立的条件

* 如```where (a=1 and 1=1) or(1!=1 or a>5)``` 简化为``` where a=1 or a>5 ```


### having子句与where合并

* 没有聚合函数和group by的时候把having的内容放到where中

### 常量表简化

* 没有数据的表, 或者只有一条数据的表
* 使用主键或者唯一二级索引进行等值匹配的查询
* 优化器在分析这种表的连表查询时会先把这种表的数据查出来, 用记录内容替换查询条件为常量
* 举例: ```select * from t1 inner join t2 on t1.col1=t2.col1 where t1.pk=123```
  * 优化器按照t1.pk=123这个主键查询到数据之后将连表查询简化为```select t1各字段的值, t2.* from t1 inner join t2 on t2.col1=t1查出来的那行的col1值```

