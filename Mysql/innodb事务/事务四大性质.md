# 事务性质

## 四大基本特性

### 原子性 Atomic

* 一个事务要么完全完成, 要么失败, 不能只完成一部分

### 隔离性 isolation

* 并发的事务之间不会相互干扰

### 持久性 durability

* 事务提交成功后结果永久被保存, 不会丢失

### 一致性 consitency

* 事务执行前后, 数据状态从一个状态转换到另一个状态, 都要符合约束规则

## 实现方式(简版)

### 原子性

* Undolog
  * 事务执行前将旧数据记录到undolog
  * 如果事务成功, 后续统一清理undolog
  * 如果事务回滚, 从undolog把数据恢复回去
  
### 隔离性

* mvcc
  * 主要用于解决读写冲突
* 锁机制
  * 保证一个事务修改的数据不会被其他事务修改

### 持久性

* redolog
  * 提交事务时, redolog落盘再视为事务提交完成, 数据页可以等磁盘压力小的时候再统一写回磁盘

### 一致性

* 其他三种特性的实现, 还有外键/唯一性/not null等约束机制
* 业务代码保证逻辑的正确性


